<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml"><head><title>Docker and Java Tooling</title><link rel="stylesheet" type="text/css" href="epub.css"/></head><body data-type="book"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Docker and Java Tooling"><div class="chapter" id="Docker_And_Java_Tooling">
<h1><span class="label">Chapter 3. </span>Docker and Java Tooling</h1>


<p>A typical toolchain of Java developers consists of an integrated development environment (IDE) such as NetBeans, Eclipse, or IntelliJ IDEA. These IDEs assist in easily writing and debugging the Java application. They also provide features like syntax highlighting and code completion, making the developer more effective.</p>

<p>These applications are packaged as an archive using a build system such as Maven, Gradle, or Ant. All required dependencies of the project are specified in these scripts. Typically one command can create an archive that can then be used for deployment.</p>

<p>This chapter explains how Docker images and containers can be easily managed in NetBeans, Eclipse, and IntelliJ IDEA. It will then show how a Docker image can be created and a container can be started using a Maven plug-in.</p>

<p>All the IDEs can configure a Docker host, pull an image, run a container, and build an image. These features are provided so that they integrate with rest of the workflow within the IDE.</p>






<section data-type="sect1" data-pdf-bookmark="NetBeans"><div class="sect1" id="idm140499669234512">
<h1>NetBeans</h1>

<p><a href="http://netbeans.org">NetBeans</a> is adding integrated support for Docker in their next release. At the time of writing, this feature is currently available in the nightly build, which can be downloaded from the <a href="http://bits.netbeans.org/download/trunk/nightly/latest/">NetBeans website</a>.</p>

<p>A new Docker node is added in the Services tab as shown in <a data-type="xref" href="#Docker_node_in_NetBeans">Figure 3-1</a>.</p>

<figure><div id="Docker_node_in_NetBeans" class="figure">
<img src="assets/dfjd_0301.png" alt="dfjd 0301"/>
<h6><span class="label">Figure 3-1. </span>Docker node in NetBeans</h6>
</div></figure>








<section data-type="sect2" data-pdf-bookmark="Configure a Docker Machine"><div class="sect2" id="idm140499669134368">
<h2>Configure a Docker Machine</h2>

<p>A new Docker host can be configured by specifying the remote API URL of the Docker host as shown in <a data-type="xref" href="#Configure_Docker_Host_in_NetBeans">Figure 3-2</a>.</p>

<figure><div id="Configure_Docker_Host_in_NetBeans" class="figure">
<img src="assets/dfjd_0302.png" alt="dfjd 0302"/>
<h6><span class="label">Figure 3-2. </span>Configure Docker Host in NetBeans</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Pull an Image"><div class="sect2" id="idm140499669181920">
<h2>Pull an Image</h2>

<p>A new image can be downloaded by right-clicking the newly created connection and selecting “Pull…” as shown in <a data-type="xref" href="#Pull_or_Build_an_Image_using_NetBeans">Figure 3-3</a>.</p>

<figure><div id="Pull_or_Build_an_Image_using_NetBeans" class="figure">
<img src="assets/dfjd_0303.png" alt="dfjd 0303"/>
<h6><span class="label">Figure 3-3. </span>Pull or build an image using NetBeans</h6>
</div></figure>

<p>The exact image name can then be specified, and this image is downloaded from the Docker Hub or the specified registry.</p>

<p>The logs from executing the command are displayed in the Output window.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Build an Image"><div class="sect2" id="idm140499669163840">
<h2>Build an Image</h2>

<p>A new image can be created by selecting “Build…” as shown in <a data-type="xref" href="#Pull_or_Build_an_Image_using_NetBeans">Figure 3-3</a> and specifying the directory name that contains <em>Dockerfile</em>. This directory serves as the build context for creating the image.</p>

<p>The Dockerfile editor provides syntax coloring to highlight instructions from comments.</p>

<p>This image can then be pushed to a registry (e.g., Docker Hub).</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Run a Container"><div class="sect2" id="idm140499669160368">
<h2>Run a Container</h2>

<p>Once an image is downloaded, a container can be started by right-clicking on the image and selecting “Run…” as shown in <a data-type="xref" href="#Run_Docker_Container_in_NetBeans">Figure 3-4</a>.</p>

<figure><div id="Run_Docker_Container_in_NetBeans" class="figure">
<img src="assets/dfjd_0304.png" alt="dfjd 0304"/>
<h6><span class="label">Figure 3-4. </span>Run Docker Container in NetBeans</h6>
</div></figure>

<p>A new tag can be attached to this image by using the “Tag…” menu.</p>

<p>More details about NetBeans and Docker are available on the <a href="http://wiki.netbeans.org/Docker">NetBeans website</a>.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Eclipse"><div class="sect1" id="idm140499669154112">
<h1>Eclipse</h1>

<p>Docker support in <a href="http://www.eclipse.org/downloads/">Eclipse</a> is available by <a href="https://wiki.eclipse.org/Linux_Tools_Project/Docker_Tooling/User_Guide">installing a plug-in</a>.</p>

<p>Eclipse introduces a new perspective as shown in <a data-type="xref" href="#Docker_perspective_in_Eclipse">Figure 3-5</a>. It contains Docker Explorer, which allows you to manage images and containers.</p>

<figure><div id="Docker_perspective_in_Eclipse" class="figure">
<img src="assets/dfjd_0305.png" alt="dfjd 0305"/>
<h6><span class="label">Figure 3-5. </span>Docker perspective in Eclipse</h6>
</div></figure>

<p>This perspective offers the following views:</p>
<dl>
<dt>Docker Explorer</dt>
<dd>
<p>A tree view showing Docker connections plus their images and containers.</p>
</dd>
<dt>Docker Images</dt>
<dd>
<p>A table view of all downloaded images for a selected connection.</p>
</dd>
<dt>Docker Containers</dt>
<dd>
<p>A table view of all containers for a selected connection (filter enabled).</p>
</dd>
<dt>Console</dt>
<dd>
<p>Display logs of <code>stdout/stderr</code> output from containers and in some instances allow input to <code>stdin</code>.</p>
</dd>
<dt>Properties</dt>
<dd>
<p>Detailed information about connections, images, and containers.</p>
</dd>
</dl>








<section data-type="sect2" data-pdf-bookmark="Configure Docker Machine"><div class="sect2" id="idm140499669634432">
<h2>Configure Docker Machine</h2>

<p>A new Docker host can be configured by specifying either the Unix socket or the remote API URL of the Docker host as shown in <a data-type="xref" href="#Configure_Docker_Host_in_Eclipse">Figure 3-6</a>.</p>

<figure><div id="Configure_Docker_Host_in_Eclipse" class="figure">
<img src="assets/dfjd_0306.png" alt="dfjd 0306"/>
<h6><span class="label">Figure 3-6. </span>Configure Docker Host in Eclipse</h6>
</div></figure>

<p>Click the Test Connection button to ensure the credentials are valid.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Pull an Image"><div class="sect2" id="idm140499669622112">
<h2>Pull an Image</h2>

<p>A new image can be downloaded by right-clicking on the newly created connection and selecting “Pull…” as shown in <a data-type="xref" href="#Pull_an_image_using_Eclipse">Figure 3-7</a>.</p>

<figure><div id="Pull_an_image_using_Eclipse" class="figure">
<img src="assets/dfjd_0307.png" alt="dfjd 0307"/>
<h6><span class="label">Figure 3-7. </span>Pull an image using Eclipse</h6>
</div></figure>

<p>The exact image name can then be specified. This image is downloaded from the Docker Hub or the specified registry.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Build an Image"><div class="sect2" id="idm140499669616960">
<h2>Build an Image</h2>

<p>A new image can be created by clicking the Build Image wizard as shown in <a data-type="xref" href="#Build_Image_in_Eclipse">Figure 3-8</a>.</p>

<figure><div id="Build_Image_in_Eclipse" class="figure">
<img src="assets/dfjd_0308.png" alt="dfjd 0308"/>
<h6><span class="label">Figure 3-8. </span>Build image in Eclipse</h6>
</div></figure>

<p>You need to specify the image name. A directory where <em>Dockerfile</em> exists or will be generated also needs to be specified. This directory serves as the build context for creating the image.</p>

<p>This image can then be pushed to a registry (e.g., Docker Hub).</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Run a Container"><div class="sect2" id="idm140499669611040">
<h2>Run a Container</h2>

<p>Once an image is downloaded, a container can be started by right-clicking on the image and selecting “Run…” as shown in <a data-type="xref" href="#Run_Docker_Container_in_Eclipse">Figure 3-9</a>.</p>

<figure><div id="Run_Docker_Container_in_Eclipse" class="figure">
<img src="assets/dfjd_0309.png" alt="dfjd 0309"/>
<h6><span class="label">Figure 3-9. </span>Run Docker Container in Eclipse</h6>
</div></figure>

<p>A new tag can be attached to this image by using the “Add Tag” menu.</p>

<p>Learn more about using Docker and Eclipse from the <a href="http://bit.ly/1RVyURW">user guide</a>.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="IntelliJ IDEA"><div class="sect1" id="idm140499669153456">
<h1>IntelliJ IDEA</h1>

<p>Docker support in <a href="https://www.jetbrains.com/idea/download/">IntelliJ IDEA</a> is available by installing a plug-in from the <a href="https://plugins.jetbrains.com/plugin/7724">plug-in repository</a>. Install the plug-in as shown in <a data-type="xref" href="#Install_Docker_Plugin_in_IntelliJ">Figure 3-10</a>.</p>

<figure><div id="Install_Docker_Plugin_in_IntelliJ" class="figure">
<img src="assets/dfjd_0310.png" alt="dfjd 0310"/>
<h6><span class="label">Figure 3-10. </span>Install Docker plug-in in IntelliJ</h6>
</div></figure>

<p>Docker support needs to be configured per project.</p>








<section data-type="sect2" data-pdf-bookmark="Configure Docker Machine"><div class="sect2" id="idm140499669096672">
<h2>Configure Docker Machine</h2>

<p>A new Docker host can be configured by specifying the remote API URL of the Docker host (see <a data-type="xref" href="#Configure_Docker_Host_in_IntelliJ">Figure 3-11</a>):</p>
<ol>
<li>
<p>Select “Import credentials from Docker Machine” to show the list of currently running Docker machines. This also allows you to configure them with a single click.</p>
</li>
<li>
<p>Navigate to View→Tool Windows→Docker to bring up the Docker Tooling window.</p>
</li>
<li>
<p>Connect to the selected remote server.</p>
</li>

</ol>

<figure><div id="Configure_Docker_Host_in_IntelliJ" class="figure">
<img src="assets/dfjd_0311.png" alt="dfjd 0311"/>
<h6><span class="label">Figure 3-11. </span>Configure Docker Host in IntelliJ</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Pull an Image"><div class="sect2" id="idm140499669089824">
<h2>Pull an Image</h2>

<p>A new image can be downloaded by right-clicking on the newly created connection and selecting “Pull image” as shown in <a data-type="xref" href="#Pull_an_image_using_IntelliJ">Figure 3-12</a>.</p>

<figure><div id="Pull_an_image_using_IntelliJ" class="figure">
<img src="assets/dfjd_0312.png" alt="dfjd 0312"/>
<h6><span class="label">Figure 3-12. </span>Pull an image using IntelliJ</h6>
</div></figure>

<p>The exact image name can then be specified. By default, Docker Hub is the registry. A different registry can be specified by clicking “New…” as shown in <a data-type="xref" href="#Registry_name_in_IntelliJ">Figure 3-13</a>.</p>

<figure><div id="Registry_name_in_IntelliJ" class="figure">
<img src="assets/dfjd_0313.png" alt="dfjd 0313"/>
<h6><span class="label">Figure 3-13. </span>Registry name in IntelliJ</h6>
</div></figure>

<p>This image is downloaded from the Docker Hub or the specified registry.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Build an Image"><div class="sect2" id="idm140499669082272">
<h2>Build an Image</h2>

<p>Creating a new image requires us to create a new directory, typically called <em>docker-dir</em>. This directory will contain <em>Dockerfile</em>, the application archive such as the <em>.war</em> file, and a file that has settings for running the container. This directory serves as the build context for creating the image.</p>

<p>The application needs to be configured so the archive is generated in this directory. A new Docker deployment configuration can be created so this archive is built before the image as shown in <a data-type="xref" href="#Build_Image_in_IntelliJ">Figure 3-14</a>.</p>

<figure><div id="Build_Image_in_IntelliJ" class="figure">
<img src="assets/dfjd_0314.png" alt="dfjd 0314"/>
<h6><span class="label">Figure 3-14. </span>Build Image in IntelliJ</h6>
</div></figure>

<p>You need to specify the image name. A directory where <code>Dockerfile</code> exists or will be generated also needs to be specified.</p>

<p>This image can then be pushed to a registry (e.g., Docker Hub).</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Run a Container"><div class="sect2" id="idm140499669075248">
<h2>Run a Container</h2>

<p>Once an image is downloaded, a container can be started by right-clicking on the image and selecting “Create container”, as shown in <a data-type="xref" href="#Run_Docker_Container_in_IntelliJ">Figure 3-15</a>.</p>

<figure><div id="Run_Docker_Container_in_IntelliJ" class="figure">
<img src="assets/dfjd_0315.png" alt="dfjd 0315"/>
<h6><span class="label">Figure 3-15. </span>Run Docker Container in IntelliJ</h6>
</div></figure>

<p>More details about the container are available in the output console.</p>

<p>More details about Docker and IntelliJ are available from the <a href="https://www.jetbrains.com/idea/docker/">IntelliJ IDEA Docker help page</a>.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Maven"><div class="sect1" id="idm140499669069712">
<h1>Maven</h1>

<p>Maven is a build tool for Java applications that makes the build process easy by providing a uniform build system. Maven projects are built using a project object model (POM) defined in a file in the main directory of the project. This file, typically called <em>pom.xml</em>, contains a set of plug-ins that builds the project.</p>

<p>Each Maven project has a well-defined location for source, tests, resources, and other related files of the project. The process for building and distributing a project is clearly defined. There are predefined <em>phases</em> that map to the lifecycle of a project. For example, the <code>compile</code> phase will compile the code and the <code>package</code> phase will take the compiled code and package it into a distributable format, such as a JAR.</p>

<p>Each plug-in in <em>pom.xml</em> offers multiple <em>goals</em> and the plug-in associates a goal with one or more phases. For example, <code>maven-compiler-plugin</code> is the plug-in that compiles your source. One of the goals offered by this plug-in is <code>compiler:compile</code>, and it’s tied to the <code>compile</code> phase. So the developer can invoke the <code>mvn compile</code> command, which invokes the associated goal from the plug-in. Read more about the Maven lifecycle at the <a href="http://bit.ly/1XgJjQD">Apache website</a>.</p>

<p>There are a few Maven plug-ins that provide goals to manage Docker images and containers:</p>

<ul>
<li>
<p><a href="http://bit.ly/1RVzbUJ">fabric8io/docker-maven-plugin</a></p>
</li>
<li>
<p><a href="http://bit.ly/1RVz4sl">spotify/docker-maven-plugin</a></p>
</li>
<li>
<p><a href="http://bit.ly/1RVyZVD">wouterd/docker-maven-plugin</a></p>
</li>
<li>
<p><a href="http://bit.ly/1RVzOOf">alexec/docker-maven-plugin</a></p>
</li>
</ul>

<p>All plug-ins offer goals that allow Docker lifecycle commands to be tied to a Maven phase. For example, the standard Maven <code>package</code> phase packages the compiled code into a JAR or WAR archive. Associating a goal from the plug-in to this phase can take the created archive and package it as a Docker image. Similarly, the standard Maven <code>install</code> phase installs the archive in the local repository. Attaching a plug-in’s goal to this phase can run the container as well.</p>

<p>The plug-ins listed here offer similar functionality. In this book, we use the <code>fabric8io/docker-maven-plugin</code> plug-in. It is recommended to look at the latest state of plug-ins and pick the one that meets your requirements.</p>

<p>Maven allows <em>profiles</em> to be specified using <code>&lt;profile&gt;</code> element in <em>pom.xml</em>. These profiles allow you to modify certain elements of the POM. The profiles can be triggered in a variety of ways. It’s often convenient to create a separate profile that includes one of the Docker Maven plug-ins and its configuration elements. This allows you to keep the usual build process and still trigger the Docker image and container lifecycle elements by invoking the profile.</p>

<p>Each profile is given a unique name. One of the common ways to invoke the profile is by using <code>-P&lt;profile-name&gt;</code> with the <code>mvn</code> CLI.</p>

<p><a data-type="xref" href="#docker-maven-plugin">Example 3-1</a> shows a Maven profile that uses the <code>fabric8io/docker-maven-plugin</code> plug-in to create Docker images and run container.</p>
<div id="docker-maven-plugin" data-type="example">
<h5><span class="label">Example 3-1. </span>Docker Maven plug-in profile</h5>

<pre data-type="programlisting" data-code-language="xml"><code class="nt">&lt;profiles</code><code class="nt">&gt;</code><code>
  </code><code class="nt">&lt;profile</code><code class="nt">&gt;</code><code>
    </code><code class="nt">&lt;id</code><code class="nt">&gt;</code><code>docker</code><code class="nt">&lt;/id&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-1" href="#callout_docker_and_java_tooling_CO1-1"><img src="assets/1.png" alt="1"/></a><code>
    </code><code class="nt">&lt;build</code><code class="nt">&gt;</code><code>
      </code><code class="nt">&lt;plugins</code><code class="nt">&gt;</code><code>
        </code><code class="nt">&lt;plugin</code><code class="nt">&gt;</code><code>
          </code><code class="nt">&lt;groupId</code><code class="nt">&gt;</code><code>io.fabric8</code><code class="nt">&lt;/groupId&gt;</code><code>
          </code><code class="nt">&lt;artifactId</code><code class="nt">&gt;</code><code>docker-maven-plugin</code><code class="nt">&lt;/artifactId&gt;</code><code>
          </code><code class="nt">&lt;version</code><code class="nt">&gt;</code><code>0.14.2</code><code class="nt">&lt;/version&gt;</code><code>
          </code><code class="nt">&lt;configuration</code><code class="nt">&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-2" href="#callout_docker_and_java_tooling_CO1-2"><img src="assets/2.png" alt="2"/></a><code>
            </code><code class="nt">&lt;images</code><code class="nt">&gt;</code><code>
              </code><code class="nt">&lt;image</code><code class="nt">&gt;</code><code>
                </code><code class="nt">&lt;name</code><code class="nt">&gt;</code><code>hello-maven</code><code class="nt">&lt;/name&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-3" href="#callout_docker_and_java_tooling_CO1-3"><img src="assets/3.png" alt="3"/></a><code>
                </code><code class="nt">&lt;build</code><code class="nt">&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-4" href="#callout_docker_and_java_tooling_CO1-4"><img src="assets/4.png" alt="4"/></a><code>
                  </code><code class="nt">&lt;from</code><code class="nt">&gt;</code><code>java</code><code class="nt">&lt;/from&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-5" href="#callout_docker_and_java_tooling_CO1-5"><img src="assets/5.png" alt="5"/></a><code>
                  </code><code class="nt">&lt;assembly</code><code class="nt">&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-6" href="#callout_docker_and_java_tooling_CO1-6"><img src="assets/6.png" alt="6"/></a><code>
                    </code><code class="nt">&lt;descriptorRef</code><code class="nt">&gt;</code><code>artifact</code><code class="nt">&lt;/descriptorRef&gt;</code><code>
                  </code><code class="nt">&lt;/assembly&gt;</code><code>
                  </code><code class="nt">&lt;cmd</code><code class="nt">&gt;</code><code>
                  java -cp maven/${project.name}-${project.
                  version}.jar com.oreilly.example.docker.
                  maven.App
                  </code><code class="nt">&lt;/cmd&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-7" href="#callout_docker_and_java_tooling_CO1-7"><img src="assets/7.png" alt="7"/></a><code>
                </code><code class="nt">&lt;/build&gt;</code><code>
                </code><code class="nt">&lt;run</code><code class="nt">&gt;</code><code> </code><a class="co" id="co_docker_and_java_tooling_CO1-8" href="#callout_docker_and_java_tooling_CO1-8"><img src="assets/8.png" alt="8"/></a><code>
                  </code><code class="nt">&lt;wait</code><code class="nt">&gt;</code><code>
                    </code><code class="nt">&lt;log</code><code class="nt">&gt;</code><code>Hello</code><code class="nt">&lt;/log&gt;</code><code>
                  </code><code class="nt">&lt;/wait&gt;</code><code>
                </code><code class="nt">&lt;/run&gt;</code><code>
              </code><code class="nt">&lt;/image&gt;</code><code>
            </code><code class="nt">&lt;/images&gt;</code><code>
          </code><code class="nt">&lt;/configuration&gt;</code><code>
        </code><code class="nt">&lt;/plugin&gt;</code><code>
      </code><code class="nt">&lt;/plugins&gt;</code><code>
    </code><code class="nt">&lt;/build&gt;</code><code>
  </code><code class="nt">&lt;/profile&gt;</code><code>
</code><code class="nt">&lt;/profiles&gt;</code></pre></div>

<p>This profile has the following elements:</p>
<dl class="calloutlist">
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-1" href="#co_docker_and_java_tooling_CO1-1"><img src="assets/1.png" alt="1"/></a></dt>
<dd><p>The profile’s name given by the <code>&lt;id&gt;</code> element, appropriately named "<code>docker</code>" in our case.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-2" href="#co_docker_and_java_tooling_CO1-2"><img src="assets/2.png" alt="2"/></a></dt>
<dd><p>The plug-in configuration section defined by the <code>&lt;configuration&gt;</code> element. The plug-in configuration has a <em>general</em> part and a list of <em>image-specific</em> configurations, one for each image. With Docker Machine, the general configuration is not required if the environment is configured as explained in <a data-type="xref" href="ch01.html#Configure_Docker_client_for_Docker_Machine">Example 1-1</a>.</p>

<p>This particular plug-in has an image-specific configuration for one image only. The image-specific configuration has three parts, described in items 3, 4, and 5.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-3" href="#co_docker_and_java_tooling_CO1-3"><img src="assets/3.png" alt="3"/></a></dt>
<dd><p>A general part containing the image’s name and alias.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-4" href="#co_docker_and_java_tooling_CO1-4"><img src="assets/4.png" alt="4"/></a></dt>
<dd><p>An optional <code>&lt;build&gt;</code> configuration defining how the images are built.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-5" href="#co_docker_and_java_tooling_CO1-5"><img src="assets/5.png" alt="5"/></a></dt>
<dd><p><code>&lt;from&gt;</code>, which defines the base image for the generated image.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-6" href="#co_docker_and_java_tooling_CO1-6"><img src="assets/6.png" alt="6"/></a></dt>
<dd><p>The <code>&lt;assembly&gt;</code> element is used to define what needs to be bundled in the image using the standard <a href="http://bit.ly/1RVyTxd">assembly descriptor format</a>. Using <code>artifact</code> ensures that the generated artifact is packaged in the image.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-7" href="#co_docker_and_java_tooling_CO1-7"><img src="assets/7.png" alt="7"/></a></dt>
<dd><p><code>&lt;cmd&gt;</code>, which specifies the command that will run when the container is started.</p></dd>
<dt><a class="co" id="callout_docker_and_java_tooling_CO1-8" href="#co_docker_and_java_tooling_CO1-8"><img src="assets/8.png" alt="8"/></a></dt>
<dd><p>An optional <code>&lt;run&gt;</code> configuration defining how the containers should be created and started.</p></dd>
</dl>

<p>The plug-in used here offers the goals listed in <a data-type="xref" href="#Docker_Maven_Plugin_Goals">Table 3-1</a>.</p>
<table id="Docker_Maven_Plugin_Goals">
<caption><span class="label">Table 3-1. </span>Docker Maven plug-in goals</caption>
<thead>
<tr>
<th>Goal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>docker:start</code></p></td>
<td><p>Create and start containers</p></td>
</tr>
<tr>
<td><p><code>docker:stop</code></p></td>
<td><p>Stop and destroy containers</p></td>
</tr>
<tr>
<td><p><code>docker:build</code></p></td>
<td><p>Build images</p></td>
</tr>
<tr>
<td><p><code>docker:watch</code></p></td>
<td><p>Watch for doing rebuilds and restarts</p></td>
</tr>
<tr>
<td><p><code>docker:push</code></p></td>
<td><p>Push images to a registry</p></td>
</tr>
<tr>
<td><p><code>docker:remove</code></p></td>
<td><p>Remove images from local Docker host</p></td>
</tr>
<tr>
<td><p><code>docker:logs</code></p></td>
<td><p>Show container logs</p></td>
</tr>
</tbody>
</table>

<p>Building this project using <code>mvn package docker:build -Pdocker</code> will now compile the source and create the JAR file, create a Dockerfile using the specification from the <code>&lt;build&gt;</code> section, pull all the layers needed to build the Docker image, and build the Docker image. The generated image looks like this:</p>

<pre data-type="programlisting" data-code-language="text">REPOSITORY    TAG     IMAGE ID       CREATED          SIZE
hello-maven   latest  3432332a5c80   32 seconds ago   642.9 MB</pre>

<p>The command <code>mvn install docker:start -Pdocker</code> will not only install the generated JAR file in the local Maven repository but will also run the container, which generates this output:</p>

<pre data-type="programlisting" data-code-language="text">[INFO] --- docker-maven-plugin:0.14.2:start (docker:start) @...
[INFO] DOCKER&gt; [hello-maven] : Start container 6fd55878c304
[INFO] DOCKER&gt; [hello-maven] : Waited on log out 'Hello' 505 ms
[INFO]
[INFO] --- docker-maven-plugin:0.14.2:logs (docker:start) @...
6fd558&gt; Hello World!</pre>

<p>The complete source code for this sample is available on  <a href="http://bit.ly/1XgKShA">GitHub</a>.</p>
</div></section>







</div></section></body></html>
